<h1 class="text-center mb-3">{{title}}</h1>
<form class="mb-4">
    <div class="form-group">
        <label for="name">Name</label>
        <input id="name" type="text" class="form-control" name="name">
    </div>
    <div class="form-group">
        <label for="email">Email</label>
        <input id="email" type="text" class="form-control" name="email">
    </div>
    <input id="submit-btn" type="submit" value="Add Member" class="btn btn-primary btn-block">
</form>
<h4>Members</h4>
<ul id="list" class="list-group">
    {{#each members}}
    <li class="list-group-item">{{this.name}}: {{this.email}}</li>
    {{/each}}
    <div id="output"></div>
</ul>
<script>
    const submitButton = document.getElementById('submit-btn');
    submitButton.addEventListener('click', (e) => {
        e.preventDefault();
        loadData();
    })
    function loadData() {
        const body = {
            name: document.querySelector('#name').value,
            email: document.querySelector('#email').value
        }
        console.log(body);
        // create an XHR object
        const xhr = new XMLHttpRequest();
        // open
        xhr.open('POST', '/api/members', true);
        xhr.setRequestHeader('Content-Type', "application/json:charset=UTF-8");
        xhr.onload = function () {
            console.log(this);
            if (this.status == 200) {
                console.log(this.responseText);
                document.getElementById('output').innerHTML = `<h1>${this.responseText}</h1>`;
            } else {
                alert('ERROR');
            }
        }
        xhr.send(JSON.stringify(body));
    }
</script>